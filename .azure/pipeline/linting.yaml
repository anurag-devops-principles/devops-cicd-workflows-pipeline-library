parameters:
  - name: jobName
    type: string
    default: ""

  - name: workingDirectory
    type: string
    default: ""

stages:
  - stage: CodeQualityChecks
    displayName: "Code Quality Check"
    jobs:
      - job: LintingChecks
        displayName: ${{ parameters.jobName }}
        steps:
          - task: NodeTool@0
            displayName: "Setup Node.JS Environment"
            inputs:
              versionSource: "spec"
              versionSpec: "20.x"

          - task: Bash@3
            displayName: "Linting Tools Installation"
            inputs:
              targetType: "inline"
              script: |
                npm install -g @biomejs/biome stylelint stylelint-config-standard markdownlint-cli

          - task: Bash@3
            displayName: "Install Dependencies"
            inputs:
              targettype: "inline"
              script: npm ci
              workingDirectory: ${{ parameters.workingDirectory}}

          - task: Bash@3
            displayName: "Java Script Linting (Biome)"
            inputs:
              targetType: "inline"
              script: biome lint ./src
              workingDirectory: ${{ parameters.workingDirectory }}
            continueOnError: true

          - task: Bash@3
            displayName: "CSS Linting (Stylelint)"
            inputs:
              targetType: "inline"
              script: stylelint "src/**/*.css"
              workingDirectory: ${{ parameters.workingDirectory }}
            continueOnError: true

          - task: Bash@3
            displayName: "README Linting (Markdownlint)"
            inputs:
              targetType: "inline"
              script: markdownlint "**/*.md"
              workingDirectory: ${{ parameters.workingDirectory }}
            continueOnError: true
